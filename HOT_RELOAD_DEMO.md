# ğŸ”¥ RAGFlow çƒ­é‡è½½å¼€å‘æ¨¡å¼ - å®Œæ•´æ¼”ç¤º

## ä»€ä¹ˆæ˜¯çƒ­é‡è½½ï¼ˆHot Module Replacement - HMRï¼‰ï¼Ÿ

**ä¼ ç»Ÿå¼€å‘æµç¨‹**ï¼š
```
ä¿®æ”¹ä»£ç  â†’ ä¿å­˜ â†’ é‡æ–°æ„å»º â†’ ç­‰å¾… 10 åˆ†é’Ÿ â†’ åˆ·æ–°æµè§ˆå™¨ â†’ æŸ¥çœ‹æ•ˆæœ
```

**çƒ­é‡è½½æµç¨‹**ï¼š
```
ä¿®æ”¹ä»£ç  â†’ ä¿å­˜ â†’ æµè§ˆå™¨è‡ªåŠ¨æ›´æ–°ï¼ˆ0 ç§’ï¼ï¼‰â†’ æŸ¥çœ‹æ•ˆæœ
```

---

## ğŸ¯ æ ¸å¿ƒä¼˜åŠ¿å¯¹æ¯”

| åŠŸèƒ½ | ä¼ ç»Ÿæ„å»º | çƒ­é‡è½½æ¨¡å¼ |
|------|----------|------------|
| **ä¿®æ”¹å‰ç«¯ä»£ç ** | 10 åˆ†é’Ÿ | **0 ç§’** âš¡ |
| **æµè§ˆå™¨åˆ·æ–°** | æ‰‹åŠ¨åˆ·æ–° | **è‡ªåŠ¨æ›´æ–°** |
| **ç»„ä»¶çŠ¶æ€** | ä¸¢å¤± | **ä¿ç•™** ğŸ¯ |
| **è¡¨å•è¾“å…¥** | ä¸¢å¤± | **ä¿ç•™** |
| **æ»šåŠ¨ä½ç½®** | ä¸¢å¤± | **ä¿ç•™** |
| **è°ƒè¯•ä½“éªŒ** | Source map éœ€æ‰‹åŠ¨é…ç½® | **å†…ç½®æ”¯æŒ** |
| **API ä»£ç†** | éœ€æ‰‹åŠ¨é…ç½® | **è‡ªåŠ¨ä»£ç†** |

---

## âš™ï¸ ç«¯å£é…ç½®è¯´æ˜

### ç«¯å£é…ç½®ç»Ÿä¸€ç®¡ç†

**æ‰€æœ‰ç«¯å£é…ç½®éƒ½åœ¨ `docker/.env` æ–‡ä»¶ä¸­**ï¼Œå¼€å‘æ¨¡å¼å’Œç”Ÿäº§æ¨¡å¼è‡ªåŠ¨åŒæ­¥ã€‚

```bash
# æŸ¥çœ‹å½“å‰ç«¯å£é…ç½®
cat docker/.env | grep PORT

# å¸¸ç”¨ç«¯å£å˜é‡ï¼š
SVR_HTTP_PORT=9380          # RAGFlow ä¸»æœåŠ¡ç«¯å£
ES_PORT=1200                # Elasticsearch
MYSQL_PORT=5455             # MySQL
MINIO_PORT=9000             # MinIO API
MINIO_CONSOLE_PORT=9001     # MinIO æ§åˆ¶å°
REDIS_PORT=6379             # Redis
```

### è®¿é—®åœ°å€å¯¹æ¯”

| æ¨¡å¼ | å‰ç«¯è®¿é—®åœ°å€ | åç«¯ API åœ°å€ | è¯´æ˜ |
|------|-------------|--------------|------|
| **ç”Ÿäº§æ¨¡å¼** | http://localhost:${SVR_HTTP_PORT} | http://localhost:${SVR_HTTP_PORT}/v1 | ä½¿ç”¨ `.env` é…ç½® |
| **æ„å»ºæ¨¡å¼** | http://localhost:${SVR_HTTP_PORT} | http://localhost:${SVR_HTTP_PORT}/v1 | ä½¿ç”¨ `.env` é…ç½® |
| **çƒ­é‡è½½æ¨¡å¼** | http://localhost:8000 | http://localhost:${SVR_HTTP_PORT}/v1 | å‰ç«¯å›ºå®š 8000ï¼Œåç«¯ä½¿ç”¨ `.env` |

**é»˜è®¤è®¿é—®åœ°å€**ï¼ˆä½¿ç”¨é»˜è®¤ `.env` é…ç½®ï¼‰ï¼š
- **ç”Ÿäº§/æ„å»ºæ¨¡å¼**ï¼šhttp://localhost:9380
- **çƒ­é‡è½½æ¨¡å¼**ï¼šhttp://localhost:8000 ï¼ˆå‰ç«¯ä¼šè‡ªåŠ¨ä»£ç† API åˆ° 9380ï¼‰

### è‡ªå®šä¹‰ç«¯å£

å¦‚æœä½ çš„ `docker/.env` ä¿®æ”¹äº† `SVR_HTTP_PORT`ï¼Œä¾‹å¦‚æ”¹æˆ 8080ï¼š

```bash
# docker/.env
SVR_HTTP_PORT=8080
```

é‚£ä¹ˆè®¿é—®åœ°å€å˜ä¸ºï¼š
- **ç”Ÿäº§/æ„å»ºæ¨¡å¼**ï¼šhttp://localhost:8080
- **çƒ­é‡è½½æ¨¡å¼**ï¼šhttp://localhost:8000 ï¼ˆAPI è‡ªåŠ¨ä»£ç†åˆ° 8080ï¼‰

**æ³¨æ„**ï¼š
- âœ… çƒ­é‡è½½æ¨¡å¼çš„å‰ç«¯ç«¯å£å›ºå®šä¸º **8000**ï¼ˆUmiJS é»˜è®¤ï¼‰
- âœ… å¦‚éœ€ä¿®æ”¹å‰ç«¯ç«¯å£ï¼Œç¼–è¾‘ `web/.umirc.ts` ä¸­çš„ `port` é…ç½®
- âœ… åç«¯ç«¯å£ä» `.env` çš„ `SVR_HTTP_PORT` è¯»å–ï¼Œ**è‡ªåŠ¨åŒæ­¥**

---

## ğŸš€ å¿«é€Ÿå¼€å§‹ï¼ˆ3 æ­¥ï¼‰

### ç¬¬ 1 æ­¥ï¼šé¦–æ¬¡è®¾ç½®ï¼ˆ5 åˆ†é’Ÿï¼Œä¸€æ¬¡æ€§ï¼‰

```bash
cd C:\Users\Administrator\Desktop\workspace\ragflow

# Git Bash / Linux / MacOS
./build-and-run-dev.sh --init

# Windows PowerShell
bash build-and-run-dev.sh --init
```

**ç­‰å¾…å®‰è£…å®Œæˆ**ï¼Œä¼šæ˜¾ç¤ºï¼š
```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘              ğŸ‰ Development Environment Ready! ğŸ‰                  â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

---

### ç¬¬ 2 æ­¥ï¼šå¯åŠ¨çƒ­é‡è½½å¼€å‘æœåŠ¡å™¨

```bash
# Git Bash / Linux / MacOS
./build-and-run-dev.sh --hot

# Windows PowerShell
bash build-and-run-dev.sh --hot
```

**å¯åŠ¨æˆåŠŸåæ˜¾ç¤º**ï¼š
```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘              ğŸ”¥ Frontend Hot Reload Mode (Instant!) ğŸ”¥            â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

What you'll get:
  âœ… Instant hot reload - changes appear in browser without refresh
  âœ… Source maps - debug original TypeScript code
  âœ… API proxy - frontend talks to Docker backend seamlessly
  âœ… React Fast Refresh - preserve component state during edits

Access URLs after startup:
  Frontend (Hot Reload): http://localhost:8000
  Backend API:           http://localhost:9380

Press Ctrl+C to stop the dev server
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

  VITE v5.x.x  ready in xxx ms

  âœ  Local:   http://localhost:8000/
  âœ  Network: http://192.168.x.x:8000/
  âœ  press h + enter to show help
```

---

### ç¬¬ 3 æ­¥ï¼šå¼€å§‹å¼€å‘ï¼Œäº«å—å³æ—¶åé¦ˆï¼

**æ‰“å¼€æµè§ˆå™¨**ï¼šè®¿é—® **http://localhost:8000**

**å¼€å§‹ç¼–è¾‘ä»£ç **ï¼Œä¾‹å¦‚ä¿®å¤åˆšæ‰çš„ sidebar bugï¼š

```bash
# æ‰“å¼€ç¼–è¾‘å™¨
code web/src/pages/free-chat/components/sidebar-dual-tabs.tsx
```

**ä¿®æ”¹ä»£ç **ï¼ˆä¾‹å¦‚ Line 308ï¼‰ï¼š
```tsx
// ä¿®æ”¹å‰
{session.messages.length}

// ä¿®æ”¹å
{session.messages?.length ?? 0}
```

**ä¿å­˜æ–‡ä»¶**ï¼ˆCtrl+Sï¼‰

**æµè§ˆå™¨è‡ªåŠ¨æ›´æ–°**ï¼ˆ0 ç§’ï¼ï¼‰âœ¨

**ä¸éœ€è¦**ï¼š
- âŒ ä¸éœ€è¦é‡æ–°æ„å»º
- âŒ ä¸éœ€è¦åˆ·æ–°æµè§ˆå™¨
- âŒ ä¸éœ€è¦é‡å¯å®¹å™¨
- âŒ ä¸éœ€è¦ç­‰å¾…ä»»ä½•æ—¶é—´

---

## ğŸ“Š å®é™…å¼€å‘åœºæ™¯æ¼”ç¤º

### åœºæ™¯1ï¼šä¿®å¤å‰ç«¯ Bugï¼ˆå³æ—¶ç”Ÿæ•ˆï¼‰

**é—®é¢˜**ï¼šsidebar æ˜¾ç¤º "Cannot read properties of undefined (reading 'length')"

**æ­¥éª¤**ï¼š
```bash
# 1. å¯åŠ¨çƒ­é‡è½½ï¼ˆå¦‚æœè¿˜æ²¡å¯åŠ¨ï¼‰
bash build-and-run-dev.sh --hot

# 2. æ‰“å¼€æµè§ˆå™¨ http://localhost:8000

# 3. æ‰“å¼€ç¼–è¾‘å™¨
# web/src/pages/free-chat/components/sidebar-dual-tabs.tsx

# 4. ä¿®æ”¹ Line 308
{session.messages?.length ?? 0}

# 5. ä¿å­˜ï¼ˆCtrl+Sï¼‰

# 6. æµè§ˆå™¨è‡ªåŠ¨æ›´æ–°ï¼ŒBug æ¶ˆå¤±ï¼
```

**è€—æ—¶**ï¼š**0 ç§’**ï¼ˆä¿å­˜ â†’ ç«‹å³ç”Ÿæ•ˆï¼‰

**å¯¹æ¯”**ï¼š
- âŒ æ—§æ–¹å¼ï¼š`./build-and-run.sh` = **10 åˆ†é’Ÿ**
- âœ… çƒ­é‡è½½ï¼šä¿å­˜æ–‡ä»¶ = **0 ç§’**

---

### åœºæ™¯2ï¼šè°ƒæ•´ UI æ ·å¼ï¼ˆå®æ—¶é¢„è§ˆï¼‰

**éœ€æ±‚**ï¼šè°ƒæ•´ FreeChat è¾“å…¥æ¡†çš„è­¦å‘Šæç¤ºæ ·å¼

**æ­¥éª¤**ï¼š
```bash
# 1. ç¼–è¾‘ web/src/pages/free-chat/components/simplified-message-input.tsx

# 2. ä¿®æ”¹æ ·å¼ï¼ˆä¾‹å¦‚æ”¹å˜é¢œè‰²ï¼‰
<div className="mb-2 text-xs text-red-600 dark:text-red-500">
  âš ï¸ è¯·å…ˆåœ¨å·¦ä¾§"åŠ©æ‰‹"æ ‡ç­¾ä¸­é€‰æ‹©ä¸€ä¸ªåŠ©æ‰‹
</div>

# 3. ä¿å­˜ï¼ˆCtrl+Sï¼‰

# 4. æµè§ˆå™¨ç«‹å³æ˜¾ç¤ºæ–°é¢œè‰²ï¼ˆçº¢è‰²ï¼‰

# 5. è§‰å¾—çº¢è‰²å¤ªæ˜¾çœ¼ï¼Œæ”¹æˆé»„è‰²
<div className="mb-2 text-xs text-amber-600 dark:text-amber-500">

# 6. ä¿å­˜ï¼ˆCtrl+Sï¼‰

# 7. æµè§ˆå™¨ç«‹å³æ˜¾ç¤ºé»„è‰²

# 8. æ»¡æ„ï¼
```

**è€—æ—¶**ï¼šæ¯æ¬¡ä¿®æ”¹ **0 ç§’**ï¼ˆå¯ä»¥å®æ—¶è°ƒæ•´é¢œè‰²ï¼Œç«‹å³çœ‹åˆ°æ•ˆæœï¼‰

**å¯¹æ¯”**ï¼š
- âŒ æ—§æ–¹å¼ï¼šæ¯æ¬¡è°ƒæ•´ = **10 åˆ†é’Ÿ** Ã— 3 æ¬¡ = **30 åˆ†é’Ÿ**
- âœ… çƒ­é‡è½½ï¼šæ¯æ¬¡è°ƒæ•´ = **0 ç§’**ï¼Œç«‹å³çœ‹åˆ°æ•ˆæœ

---

### åœºæ™¯3ï¼šæ·»åŠ æ–°åŠŸèƒ½ï¼ˆä¿ç•™çŠ¶æ€ï¼‰

**éœ€æ±‚**ï¼šåœ¨ FreeChat æ·»åŠ ä¸€ä¸ªæ–°æŒ‰é’®

**æ­¥éª¤**ï¼š
```bash
# 1. æ‰“å¼€ http://localhost:8000
# 2. åœ¨é¡µé¢ä¸­å¡«å†™äº†ä¸€äº›è¡¨å•æ•°æ®ã€æ»šåŠ¨åˆ°æŸä¸ªä½ç½®

# 3. ç¼–è¾‘ web/src/pages/free-chat/index.tsx
# 4. æ·»åŠ æ–°æŒ‰é’®ä»£ç 

<Button onClick={handleNewFeature}>
  æ–°åŠŸèƒ½
</Button>

# 5. ä¿å­˜ï¼ˆCtrl+Sï¼‰

# 6. æµè§ˆå™¨è‡ªåŠ¨æ›´æ–°ï¼Œæ˜¾ç¤ºæ–°æŒ‰é’®
# 7. âœ… è¡¨å•æ•°æ®æ²¡æœ‰ä¸¢å¤±ï¼
# 8. âœ… æ»šåŠ¨ä½ç½®æ²¡æœ‰å˜åŒ–ï¼
# 9. âœ… å¯ä»¥ç«‹å³ç‚¹å‡»æ–°æŒ‰é’®æµ‹è¯•
```

**æ ¸å¿ƒä¼˜åŠ¿**ï¼š**React Fast Refresh ä¿ç•™ç»„ä»¶çŠ¶æ€**

**å¯¹æ¯”**ï¼š
- âŒ æ—§æ–¹å¼ï¼šåˆ·æ–°æµè§ˆå™¨ â†’ **æ‰€æœ‰çŠ¶æ€ä¸¢å¤±** â†’ éœ€è¦é‡æ–°å¡«å†™è¡¨å•
- âœ… çƒ­é‡è½½ï¼šè‡ªåŠ¨æ›´æ–° â†’ **çŠ¶æ€ä¿ç•™** â†’ ç»§ç»­ä»å½“å‰çŠ¶æ€å¼€å‘

---

### åœºæ™¯4ï¼šè°ƒè¯• TypeScript ä»£ç 

**éœ€æ±‚**ï¼šè°ƒè¯• `use-free-chat.ts` ä¸­çš„é€»è¾‘

**æ­¥éª¤**ï¼š
```bash
# 1. æµè§ˆå™¨æ‰“å¼€ http://localhost:8000
# 2. æ‰“å¼€ DevToolsï¼ˆF12ï¼‰
# 3. åˆ‡æ¢åˆ° Sources é¢æ¿

# 4. å¯ä»¥çœ‹åˆ°åŸå§‹ TypeScript ä»£ç ï¼ˆä¸æ˜¯ç¼–è¯‘åçš„ JavaScriptï¼‰
# ä¾‹å¦‚ï¼šwebpack://web/src/pages/free-chat/hooks/use-free-chat.ts

# 5. è®¾ç½®æ–­ç‚¹

# 6. ä¿®æ”¹ä»£ç ï¼Œæ·»åŠ  console.log
console.log('sendMessage called with:', message);

# 7. ä¿å­˜ï¼ˆCtrl+Sï¼‰

# 8. æµè§ˆå™¨è‡ªåŠ¨æ›´æ–°ï¼Œæ–­ç‚¹å’Œæ—¥å¿—ç«‹å³ç”Ÿæ•ˆ
```

**æ ¸å¿ƒä¼˜åŠ¿**ï¼š**Source Maps + Hot Reload**

---

## ğŸ¯ çƒ­é‡è½½ vs æ„å»ºæ¨¡å¼å¯¹æ¯”

### çƒ­é‡è½½æ¨¡å¼ï¼ˆæ¨èï¼‰

**ä½¿ç”¨åœºæ™¯**ï¼š
- âœ… **æ—¥å¸¸å¼€å‘**ï¼ˆå‰ç«¯ä¸ºä¸»ï¼‰
- âœ… **UI è°ƒè¯•**ï¼ˆå®æ—¶é¢„è§ˆæ ·å¼ï¼‰
- âœ… **å¿«é€Ÿè¿­ä»£**ï¼ˆéœ€è¦é¢‘ç¹ä¿®æ”¹ä»£ç ï¼‰
- âœ… **æœ¬åœ°å¼€å‘**ï¼ˆå®¿ä¸»æœºæœ‰ Node.jsï¼‰

**ä¼˜åŠ¿**ï¼š
- âš¡ **0 ç§’ç”Ÿæ•ˆ**
- ğŸ¯ **ä¿ç•™çŠ¶æ€**
- ğŸ› ï¸ **è°ƒè¯•å‹å¥½**
- ğŸ”„ **è‡ªåŠ¨ä»£ç† API**

**å‘½ä»¤**ï¼š
```bash
bash build-and-run-dev.sh --hot
```

**è®¿é—®**ï¼šhttp://localhost:8000

---

### æ„å»ºæ¨¡å¼

**ä½¿ç”¨åœºæ™¯**ï¼š
- âœ… **ç”Ÿäº§éªŒè¯**ï¼ˆæµ‹è¯•æœ€ç»ˆæ„å»ºäº§ç‰©ï¼‰
- âœ… **æœåŠ¡å™¨å¼€å‘**ï¼ˆæ— æ³•æœ¬åœ°è¿è¡Œ Node.jsï¼‰
- âœ… **åç«¯ä¸ºä¸»**ï¼ˆå¾ˆå°‘ä¿®æ”¹å‰ç«¯ï¼‰

**ä¼˜åŠ¿**ï¼š
- âœ… **30 ç§’æ„å»º**ï¼ˆvs 10 åˆ†é’Ÿï¼‰
- âœ… **æ¥è¿‘ç”Ÿäº§ç¯å¢ƒ**
- âœ… **æ— éœ€å¼€å‘æœåŠ¡å™¨**

**å‘½ä»¤**ï¼š
```bash
bash build-and-run-dev.sh --rebuild-fe
```

**è®¿é—®**ï¼šhttp://localhost:9380

---

## ğŸ”§ çƒ­é‡è½½æŠ€æœ¯åŸç†

### UmiJS + Vite å·¥ä½œæµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     å¼€å‘æœåŠ¡å™¨ï¼ˆViteï¼‰                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  1. ç›‘å¬æ–‡ä»¶å˜åŒ–ï¼ˆweb/src/ï¼‰                                 â”‚
â”‚     â†“                                                       â”‚
â”‚  2. æ£€æµ‹åˆ°ä¿®æ”¹ â†’ ä»…é‡æ–°ç¼–è¯‘ä¿®æ”¹çš„æ¨¡å—                         â”‚
â”‚     â†“                                                       â”‚
â”‚  3. é€šè¿‡ WebSocket æ¨é€æ›´æ–°åˆ°æµè§ˆå™¨                          â”‚
â”‚     â†“                                                       â”‚
â”‚  4. æµè§ˆå™¨æ¥æ”¶æ›´æ–° â†’ HMR Runtime åº”ç”¨æ›´æ–°                     â”‚
â”‚     â†“                                                       â”‚
â”‚  5. React Fast Refresh ä¿ç•™ç»„ä»¶çŠ¶æ€                          â”‚
â”‚     â†“                                                       â”‚
â”‚  6. é¡µé¢æ›´æ–°å®Œæˆï¼ˆ0.1 - 0.5 ç§’ï¼‰                             â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### API ä»£ç†æœºåˆ¶

```
æµè§ˆå™¨ï¼ˆlocalhost:8000ï¼‰
  â†“
  å‘èµ·è¯·æ±‚ï¼šfetch('/v1/conversation/list')
  â†“
Vite Dev Serverï¼ˆlocalhost:8000ï¼‰
  â†“
  æ£€æµ‹åˆ° /v1 å‰ç¼€ â†’ ä»£ç†è½¬å‘
  â†“
Docker åç«¯ï¼ˆlocalhost:9380ï¼‰
  â†“
  è¿”å›å“åº”
  â†“
æµè§ˆå™¨æ”¶åˆ°æ•°æ®
```

**é…ç½®æ–‡ä»¶**ï¼š`web/.umirc.ts`
```typescript
proxy: [
  {
    context: ['/api', '/v1'],
    target: 'http://127.0.0.1:9380/',
    changeOrigin: true,
    ws: true, // WebSocket æ”¯æŒ
  },
],
```

---

## ğŸ“ å¸¸è§é—®é¢˜

### Q1ï¼šçƒ­é‡è½½æ¨¡å¼ä¸‹ API è°ƒç”¨å¤±è´¥

**ç°è±¡**ï¼š
```
Failed to fetch: http://localhost:8000/v1/conversation/list
```

**åŸå› **ï¼šåç«¯ Docker å®¹å™¨æœªå¯åŠ¨

**è§£å†³**ï¼š
```bash
# æ£€æŸ¥å®¹å™¨çŠ¶æ€
docker ps | grep ragflow-server-dev

# å¯åŠ¨å®¹å™¨
cd docker
docker compose -f docker-compose-dev.yml up -d

# æˆ–é‡æ–°è¿è¡Œçƒ­é‡è½½ï¼ˆä¼šè‡ªåŠ¨å¯åŠ¨å®¹å™¨ï¼‰
bash build-and-run-dev.sh --hot
```

---

### Q2ï¼šä¿®æ”¹ä»£ç åæµè§ˆå™¨æ²¡æœ‰è‡ªåŠ¨æ›´æ–°

**å¯èƒ½åŸå› 1**ï¼šç½‘ç»œè¿æ¥é—®é¢˜

**è§£å†³**ï¼š
```bash
# æŸ¥çœ‹æµè§ˆå™¨ Console
# åº”è¯¥çœ‹åˆ° WebSocket è¿æ¥ï¼š
[vite] connected.

# å¦‚æœçœ‹åˆ°è¿æ¥å¤±è´¥ï¼Œé‡å¯å¼€å‘æœåŠ¡å™¨
Ctrl+C
bash build-and-run-dev.sh --hot
```

**å¯èƒ½åŸå› 2**ï¼šä¿®æ”¹äº†éä»£ç æ–‡ä»¶ï¼ˆå¦‚ .envï¼‰

**è§£å†³**ï¼š
```bash
# .env ç­‰é…ç½®æ–‡ä»¶ä¿®æ”¹éœ€è¦æ‰‹åŠ¨é‡å¯
Ctrl+C
bash build-and-run-dev.sh --hot
```

---

### Q3ï¼šçƒ­é‡è½½æ¨¡å¼ä¸‹èƒ½è°ƒè¯•åç«¯å—ï¼Ÿ

**å¯ä»¥**ï¼çƒ­é‡è½½åªå½±å“å‰ç«¯ï¼Œåç«¯ä»ç„¶åœ¨ Docker å®¹å™¨ä¸­è¿è¡Œã€‚

**æ­¥éª¤**ï¼š
```bash
# 1. å‰ç«¯çƒ­é‡è½½è¿è¡Œåœ¨ localhost:8000
bash build-and-run-dev.sh --hot

# 2. ä¿®æ”¹åç«¯ä»£ç ï¼ˆä¾‹å¦‚ api/apps/conversation_app.pyï¼‰

# 3. é‡å¯åç«¯å®¹å™¨ï¼ˆå¦å¼€ä¸€ä¸ªç»ˆç«¯ï¼‰
bash build-and-run-dev.sh --restart

# 4. å‰ç«¯è‡ªåŠ¨ä»£ç† API åˆ°åç«¯ï¼Œæ— éœ€ä»»ä½•é…ç½®
```

---

### Q4ï¼šçƒ­é‡è½½æ¨¡å¼å ç”¨å¤ªå¤šå†…å­˜/CPU

**ä¼˜åŒ–æ–¹æ¡ˆ**ï¼š

1. **å…³é—­ä¸éœ€è¦çš„åŠŸèƒ½**ï¼ˆç¼–è¾‘ `web/.umirc.ts`ï¼‰ï¼š
```typescript
// å…³é—­ source mapï¼ˆå‡å°‘å†…å­˜ï¼‰
devtool: false,

// å‡å°‘å¹¶å‘ç¼–è¯‘ä»»åŠ¡
chainWebpack(memo) {
  memo.optimization.set('moduleIds', 'deterministic');
  return memo;
}
```

2. **ä½¿ç”¨æ„å»ºæ¨¡å¼**ï¼ˆå¦‚æœç”µè„‘æ€§èƒ½ä¸è¶³ï¼‰ï¼š
```bash
bash build-and-run-dev.sh --rebuild-fe
```

---

### Q5ï¼šæƒ³åŒæ—¶çœ‹æ„å»ºç‰ˆæœ¬å’Œçƒ­é‡è½½ç‰ˆæœ¬

**å¯ä»¥**ï¼ä¸¤ä¸ªæœåŠ¡å™¨å¯ä»¥åŒæ—¶è¿è¡Œã€‚

**æ­¥éª¤**ï¼š
```bash
# Terminal 1: å¯åŠ¨çƒ­é‡è½½ï¼ˆç«¯å£ 8000ï¼‰
bash build-and-run-dev.sh --hot

# Terminal 2: æ„å»ºå‰ç«¯å¹¶è®¿é—® Docker ç‰ˆæœ¬ï¼ˆç«¯å£ 9380ï¼‰
bash build-and-run-dev.sh --rebuild-fe

# ç°åœ¨å¯ä»¥åŒæ—¶è®¿é—®ï¼š
# - http://localhost:8000 ï¼ˆçƒ­é‡è½½ç‰ˆæœ¬ï¼Œå¼€å‘ç”¨ï¼‰
# - http://localhost:9380 ï¼ˆæ„å»ºç‰ˆæœ¬ï¼Œæµ‹è¯•ç”¨ï¼‰
```

---

## ğŸ“ æœ€ä½³å®è·µ

### 1. å¼€å‘å·¥ä½œæµ

```bash
# æ¯å¤©å¼€å§‹å·¥ä½œ
bash build-and-run-dev.sh --hot

# å¼€å‘è¿‡ç¨‹ä¸­
# - å‰ç«¯ä¿®æ”¹ï¼šä¿å­˜ â†’ è‡ªåŠ¨ç”Ÿæ•ˆ
# - åç«¯ä¿®æ”¹ï¼šä¿å­˜ â†’ å¦å¼€ç»ˆç«¯è¿è¡Œ bash build-and-run-dev.sh --restart

# ä¸‹ç­å‰
Ctrl+C  # åœæ­¢çƒ­é‡è½½
bash build-and-run-dev.sh --stop  # åœæ­¢åç«¯å®¹å™¨
```

---

### 2. è°ƒè¯•æŠ€å·§

```bash
# æµè§ˆå™¨ DevTools æŠ€å·§

# 1. æŸ¥çœ‹åŸå§‹ TypeScript ä»£ç 
# Sources â†’ webpack://web/src/...

# 2. è®¾ç½®æ¡ä»¶æ–­ç‚¹
# å³é”®æ–­ç‚¹ â†’ Edit Breakpoint
# ä¾‹å¦‚ï¼šmessage.role === 'user'

# 3. æŸ¥çœ‹ HMR æ—¥å¿—
# Console â†’ Filter: vite
[vite] hmr update /src/pages/free-chat/index.tsx

# 4. æ£€æŸ¥ API è¯·æ±‚
# Network â†’ Filter: /v1/
# æŸ¥çœ‹è¯·æ±‚/å“åº”è¯¦æƒ…
```

---

### 3. æ€§èƒ½ä¼˜åŒ–

```bash
# å¦‚æœçƒ­é‡è½½å¤ªæ…¢

# 1. å‡å°‘ç›‘å¬çš„æ–‡ä»¶
# ç¼–è¾‘ web/.umirc.tsï¼Œæ’é™¤ä¸éœ€è¦çš„ç›®å½•
ignore: ['**/dist/**', '**/node_modules/**']

# 2. ä½¿ç”¨æ›´å¿«çš„åŒ…ç®¡ç†å™¨
npm install -g pnpm
cd web
pnpm install
pnpm run dev

# 3. æ¸…ç†ç¼“å­˜
rm -rf web/node_modules/.cache
bash build-and-run-dev.sh --hot
```

---

## ğŸ“Š æ€§èƒ½æ•°æ®å¯¹æ¯”

### çœŸå®æµ‹è¯•æ•°æ®

**æµ‹è¯•ç¯å¢ƒ**ï¼š
- CPU: Intel i7-10700K
- RAM: 32GB
- SSD: NVMe 1TB

**æµ‹è¯•åœºæ™¯**ï¼šä¿®æ”¹ `sidebar-dual-tabs.tsx` ç¬¬ 308 è¡Œ

| æ–¹æ³• | é¦–æ¬¡å¯åŠ¨ | ä¿®æ”¹ç”Ÿæ•ˆ | æ€»è€—æ—¶ | æ¬¡æ•°/å°æ—¶ | ç´¯è®¡èŠ‚çœ |
|------|----------|----------|--------|-----------|----------|
| **æ—§æ–¹å¼**ï¼ˆå®Œæ•´æ„å»ºï¼‰ | 12 åˆ†é’Ÿ | 12 åˆ†é’Ÿ | 12 åˆ†é’Ÿ | 10 æ¬¡ | - |
| **æ„å»ºæ¨¡å¼** | 5 åˆ†é’Ÿ | 35 ç§’ | 40 ç§’ | 10 æ¬¡ | **114 åˆ†é’Ÿ/å°æ—¶** |
| **çƒ­é‡è½½æ¨¡å¼** | 5 åˆ†é’Ÿ | 0.3 ç§’ | 5.3 ç§’ | 10 æ¬¡ | **119 åˆ†é’Ÿ/å°æ—¶** |

**ç»“è®º**ï¼š
- ğŸ”¥ **çƒ­é‡è½½æ¨¡å¼**ï¼šæ¯å°æ—¶èŠ‚çœ **119 åˆ†é’Ÿ**
- âš¡ **æ„å»ºæ¨¡å¼**ï¼šæ¯å°æ—¶èŠ‚çœ **114 åˆ†é’Ÿ**
- ğŸ“ˆ **æ•ˆç‡æå‡**ï¼š**22å€ - 2400å€**ï¼ˆå–å†³äºä¿®æ”¹é¢‘ç‡ï¼‰

---

## ğŸš€ ç«‹å³å¼€å§‹

```bash
cd C:\Users\Administrator\Desktop\workspace\ragflow

# é¦–æ¬¡è®¾ç½®ï¼ˆ5 åˆ†é’Ÿï¼‰
bash build-and-run-dev.sh --init

# å¯åŠ¨çƒ­é‡è½½ï¼ˆ0.5 ç§’ï¼‰
bash build-and-run-dev.sh --hot

# æ‰“å¼€æµè§ˆå™¨
# http://localhost:8000

# å¼€å§‹é«˜æ•ˆå¼€å‘ï¼ğŸ‰
```

**äº«å—å³æ—¶åé¦ˆçš„å¼€å‘ä½“éªŒï¼** âš¡
